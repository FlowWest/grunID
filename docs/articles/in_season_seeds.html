<!DOCTYPE html>
<!-- Generated by pkgdown: do not edit by hand --><html lang="en">
<head>
<meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
<meta charset="utf-8">
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
<meta name="description" content="grunID">
<title>Adding In-season seeds • grunID</title>
<script src="../deps/jquery-3.6.0/jquery-3.6.0.min.js"></script><meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
<link href="../deps/bootstrap-5.2.2/bootstrap.min.css" rel="stylesheet">
<script src="../deps/bootstrap-5.2.2/bootstrap.bundle.min.js"></script><!-- Font Awesome icons --><link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.12.1/css/all.min.css" integrity="sha256-mmgLkCYLUQbXn0B1SRqzHar6dCnv9oZFPEC1g1cwlkk=" crossorigin="anonymous">
<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.12.1/css/v4-shims.min.css" integrity="sha256-wZjR52fzng1pJHwx4aV2AO3yyTOXrcDW7jBpJtTwVxw=" crossorigin="anonymous">
<!-- bootstrap-toc --><script src="https://cdn.jsdelivr.net/gh/afeld/bootstrap-toc@v1.0.1/dist/bootstrap-toc.min.js" integrity="sha256-4veVQbu7//Lk5TSmc7YV48MxtMy98e26cf5MrgZYnwo=" crossorigin="anonymous"></script><!-- headroom.js --><script src="https://cdnjs.cloudflare.com/ajax/libs/headroom/0.11.0/headroom.min.js" integrity="sha256-AsUX4SJE1+yuDu5+mAVzJbuYNPHj/WroHuZ8Ir/CkE0=" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/headroom/0.11.0/jQuery.headroom.min.js" integrity="sha256-ZX/yNShbjqsohH1k95liqY9Gd8uOiE1S4vZc+9KQ1K4=" crossorigin="anonymous"></script><!-- clipboard.js --><script src="https://cdnjs.cloudflare.com/ajax/libs/clipboard.js/2.0.6/clipboard.min.js" integrity="sha256-inc5kl9MA1hkeYUt+EC3BhlIgyp/2jDIyBLS6k3UxPI=" crossorigin="anonymous"></script><!-- search --><script src="https://cdnjs.cloudflare.com/ajax/libs/fuse.js/6.4.6/fuse.js" integrity="sha512-zv6Ywkjyktsohkbp9bb45V6tEMoWhzFzXis+LrMehmJZZSys19Yxf1dopHx7WzIKxr5tK2dVcYmaCk2uqdjF4A==" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/autocomplete.js/0.38.0/autocomplete.jquery.min.js" integrity="sha512-GU9ayf+66Xx2TmpxqJpliWbT5PiGYxpaG8rfnBEk1LL8l1KGkRShhngwdXK1UgqhAzWpZHSiYPc09/NwDQIGyg==" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/mark.js/8.11.1/mark.min.js" integrity="sha512-5CYOlHXGh6QpOFA/TeTylKLWfB3ftPsde7AnmhuitiTX4K5SqCLBeKro6sPS8ilsz1Q4NRx3v8Ko2IBiszzdww==" crossorigin="anonymous"></script><!-- pkgdown --><script src="../pkgdown.js"></script><meta property="og:title" content="Adding In-season seeds">
<meta property="og:description" content="grunID">
<!-- mathjax --><script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/MathJax.js" integrity="sha256-nvJJv9wWKEm88qvoQl9ekL2J+k/RWIsaSScxxlsrv8k=" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/config/TeX-AMS-MML_HTMLorMML.js" integrity="sha256-84DKXVJXs0/F8OTMzX4UR909+jtl4G7SPypPavF+GfA=" crossorigin="anonymous"></script><!--[if lt IE 9]>
<script src="https://oss.maxcdn.com/html5shiv/3.7.3/html5shiv.min.js"></script>
<script src="https://oss.maxcdn.com/respond/1.4.2/respond.min.js"></script>
<![endif]-->
</head>
<body>
    <a href="#main" class="visually-hidden-focusable">Skip to contents</a>
    

    <nav class="navbar fixed-top navbar-default navbar-expand-lg bg-light"><div class="container">
    
    <a class="navbar-brand me-2" href="../index.html">grunID</a>

    <small class="nav-text text-muted me-auto" data-bs-toggle="tooltip" data-bs-placement="bottom" title="">0.5</small>

    
    <button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#navbar" aria-controls="navbar" aria-expanded="false" aria-label="Toggle navigation">
      <span class="navbar-toggler-icon"></span>
    </button>

    <div id="navbar" class="collapse navbar-collapse ms-3">
      <ul class="navbar-nav me-auto">
<li class="nav-item">
  <a class="nav-link" href="../reference/index.html">Reference</a>
</li>
<li class="active nav-item dropdown">
  <a href="#" class="nav-link dropdown-toggle" data-bs-toggle="dropdown" role="button" aria-expanded="false" aria-haspopup="true" id="dropdown-articles">Articles</a>
  <div class="dropdown-menu" aria-labelledby="dropdown-articles">
    <a class="dropdown-item" href="../articles/azure-authentication.html">Authentication with Azure AD</a>
    <a class="dropdown-item" href="../articles/process_and_add_assay_results.html">Process and add assay results to database</a>
    <a class="dropdown-item" href="../articles/query_sample_status.html">Querying Sample Status</a>
    <a class="dropdown-item" href="../articles/in_season_seeds.html">Adding In-Season Seeds</a>
    <a class="dropdown-item" href="../articles/grunid-app.html">grunID Shiny App</a>
  </div>
</li>
<li class="nav-item">
  <a class="nav-link" href="../articles/grunID-data-templates.html">Templates</a>
</li>
      </ul>
<form class="form-inline my-2 my-lg-0" role="search">
        <input type="search" class="form-control me-sm-2" aria-label="Toggle navigation" name="search-input" data-search-index="../search.json" id="search-input" placeholder="Search for" autocomplete="off">
</form>

      <ul class="navbar-nav">
<li class="nav-item">
  <a class="nav-link" href="https://github.com/FlowWest/grunID" aria-label="github">
    <span class="fab fa fab fa-github fa-lg"></span>
     
  </a>
</li>
      </ul>
</div>

    
  </div>
</nav><div class="container template-article">




<div class="row">
  <main id="main" class="col-md-9"><div class="page-header">
      <img src="" class="logo" alt=""><h1>Adding In-season seeds</h1>
            
      
      
      <div class="d-none name"><code>in_season_seeds.Rmd</code></div>
    </div>

    
    
<div class="sourceCode" id="cb1"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="kw"><a href="https://rdrr.io/r/base/library.html" class="external-link">library</a></span><span class="op">(</span><span class="va">grunID</span><span class="op">)</span></span></code></pre></div>
<div class="section level2">
<h2 id="overview">Overview<a class="anchor" aria-label="anchor" href="#overview"></a>
</h2>
<p>In an ideal setting, sample seeds should all be added to the database
before inserting Sherlock output, but things don’t always go as planned.
In this article, we discuss the process of creating additional samples
for any location.</p>
</div>
<div class="section level2">
<h2 id="sample-plan">Sample Plan<a class="anchor" aria-label="anchor" href="#sample-plan"></a>
</h2>
<p>The first step is to create a “Sample Plan”. A Sample Plan is simply
a dataframe with the necessary data to create samples. The required
information includes:</p>
<ul>
<li>
<strong>Required</strong>: Location Code
(<code>location_code</code>) - The location for these samples. Use
<code>grunID::get_sample_locations(con)</code> to retrieve a list of
values that exist in the database.</li>
<li>
<strong>Required</strong>: Sample Event Number
(<code>sample_event_number</code>) - The sample event number associated
with these samples.</li>
<li>
<strong>Required</strong>: First Sample Date
(<code>first_sample_date</code>) - The first sample date for the
event.</li>
<li>
<strong>Required</strong>: Sample Bin Code
(<code>sample_bin_code</code>) - Sample bin codes for the samples. Note
that each bin code must have its own row.</li>
<li>Fork Length Range (<code>min_fork_length</code> and
<code>max_fork_length</code>) - The fork length for the given bin
code.</li>
<li>Expected Number of Samples (<code>expected_number_of_samples</code>)
- The expected number of samples. This is good information to have but
if you are unsure feel free to pick a large number like 50 or 75.</li>
</ul>
<p>A spreadsheet template is available <a href="#">here</a> or on the <a href="#">Templates Page</a>. You can read this in using R with the
following code:</p>
<div class="sourceCode" id="cb2"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">in_season_seeds</span> <span class="op">&lt;-</span> <span class="fu">readxl</span><span class="fu">::</span><span class="fu"><a href="https://readxl.tidyverse.org/reference/read_excel.html" class="external-link">read_excel</a></span><span class="op">(</span><span class="st">"/path/to/in-season-seeds.xlsx"</span><span class="op">)</span></span></code></pre></div>
<p>The dataframe should look like this, with your own data in place of
these examples:</p>
<table class="table">
<colgroup>
<col width="11%">
<col width="15%">
<col width="14%">
<col width="12%">
<col width="12%">
<col width="12%">
<col width="21%">
</colgroup>
<thead><tr class="header">
<th align="left">location_code</th>
<th align="right">sample_event_number</th>
<th align="left">first_sample_date</th>
<th align="left">sample_bin_code</th>
<th align="right">min_fork_length</th>
<th align="right">max_fork_length</th>
<th align="right">expected_number_of_samples</th>
</tr></thead>
<tbody>
<tr class="odd">
<td align="left">FTH_RM17</td>
<td align="right">1</td>
<td align="left">2022-01-10</td>
<td align="left">A</td>
<td align="right">25</td>
<td align="right">65</td>
<td align="right">0</td>
</tr>
<tr class="even">
<td align="left">FTH_RM17</td>
<td align="right">1</td>
<td align="left">2022-01-10</td>
<td align="left">B</td>
<td align="right">65</td>
<td align="right">105</td>
<td align="right">0</td>
</tr>
<tr class="odd">
<td align="left">FTH_RM17</td>
<td align="right">1</td>
<td align="left">2022-01-10</td>
<td align="left">C</td>
<td align="right">105</td>
<td align="right">145</td>
<td align="right">0</td>
</tr>
<tr class="even">
<td align="left">FTH_RM17</td>
<td align="right">1</td>
<td align="left">2022-01-10</td>
<td align="left">D</td>
<td align="right">145</td>
<td align="right">185</td>
<td align="right">0</td>
</tr>
<tr class="odd">
<td align="left">FTH_RM17</td>
<td align="right">1</td>
<td align="left">2022-01-10</td>
<td align="left">E</td>
<td align="right">185</td>
<td align="right">225</td>
<td align="right">0</td>
</tr>
<tr class="even">
<td align="left">FTH_RM17</td>
<td align="right">2</td>
<td align="left">2022-01-24</td>
<td align="left">A</td>
<td align="right">25</td>
<td align="right">65</td>
<td align="right">0</td>
</tr>
</tbody>
</table>
</div>
<div class="section level2">
<h2 id="insert-into-database">Insert into Database<a class="anchor" aria-label="anchor" href="#insert-into-database"></a>
</h2>
<p>Before inserting data into the database, we must first ensure the
data types are correct for each column.</p>
<div class="sourceCode" id="cb3"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">in_season_seeds</span> <span class="op">|&gt;</span> </span>
<span>  <span class="fu">dplyr</span><span class="fu">::</span><span class="fu"><a href="https://dplyr.tidyverse.org/reference/mutate.html" class="external-link">mutate</a></span><span class="op">(</span></span>
<span>    sample_event_number <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/integer.html" class="external-link">as.integer</a></span><span class="op">(</span><span class="va">sample_event_number</span><span class="op">)</span>,</span>
<span>    min_fork_length <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/integer.html" class="external-link">as.integer</a></span><span class="op">(</span><span class="va">min_fork_length</span><span class="op">)</span>,</span>
<span>    max_fork_length <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/integer.html" class="external-link">as.integer</a></span><span class="op">(</span><span class="va">max_fork_length</span><span class="op">)</span></span>
<span>  <span class="op">)</span></span></code></pre></div>
<p>Next, we simply call the grunID::add_sample_plan function to insert
additional plan values into the database. This function, under the hood,
will add sample events, sample bins, and the samples extracted from this
file.</p>
<div class="sourceCode" id="cb4"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">con</span> <span class="op">&lt;-</span> <span class="fu">grunID</span><span class="fu">::</span><span class="fu"><a href="../reference/gr_db_connect.html">gr_db_connect</a></span><span class="op">(</span><span class="op">)</span></span>
<span><span class="fu">grunID</span><span class="fu">::</span><span class="fu"><a href="../reference/add_sample_plan.html">add_sample_plan</a></span><span class="op">(</span><span class="va">con</span>, <span class="va">in_season_seeds</span>, verbose <span class="op">=</span> <span class="cn">TRUE</span><span class="op">)</span> <span class="co"># verbose = TRUE will give some progress bars</span></span></code></pre></div>
</div>
  </main><aside class="col-md-3"><nav id="toc"><h2>On this page</h2>
    </nav></aside>
</div>



    <footer><div class="pkgdown-footer-left">
  <p></p>
<p>Developed by Emanuel Rodriguez, Liz Stebbins.</p>
</div>

<div class="pkgdown-footer-right">
  <p></p>
<p>Site built with <a href="https://pkgdown.r-lib.org/" class="external-link">pkgdown</a> 2.0.7.</p>
</div>

    </footer>
</div>

  

  

  </body>
</html>
